
slovar = {
    #A
    'avokada' : 'avokado',
    #B
    'bazilike' : 'bazilika',
    'buče' : 'buča',
    'bučk' : 'bučka',
    'bučke' : 'bučka',
    #C
    'čebule' : 'čebula',
    'čebuli' : 'čebula',
    'česna' : 'česen',
    'cimeta' : 'cimet',
    #Č
    'čokolade' : 'čokolada',
    #D
    'drobnjaka' : 'drobnjak',
    'drobtin' : 'drobtine',
    #E
    #F
    'feta' : 'sir',
    'fete' : 'sir',
    'fižola' : 'fižol',
    #G
    'gob' : 'gobe',
    'govedine' : 'govedina',
    'govejega' : 'govedina',
    'gustina' : 'škrob',
    #H
    'hrušk' : 'hruška',
    'hruške' : 'hruška',
    'hruškovega' : 'hruška',
    #I
    'ingverja' : 'ingver',
    #J
    'jajc' : 'jajca',
    'jajce' : 'jajca',
    'jajci' : 'jajca',
    'jelenovega' : 'divjačina',
    'jogurta' : 'jogurt',
    #K
    'kakava' : 'kakav',
    'kisa' : 'kis',
    'kolerabe' : 'koleraba',
    'korenčka' : 'korenje',
    'korenček' : 'korenje',
    'korenčke' : 'korenje',
    'korenja' : 'korenje',
    'koruze' : 'koruza',
    'krompirji' : 'krompir',
    'krompirja' : 'krompir',
    'kruha' : 'kruh',
    'kumar' : 'kumara',
    'kumine' : 'kumina',
    'kvasa' : 'kvas',
    #L
    'limon' : 'limona',
    'limone' : 'limona',
    'limonin' : 'limona',
    'limonina' : 'limona',
    'limonine' : 'limona',
    'limoninega' : 'limona',
    'lista' : 'list',
    'listi' : 'list',
    'lovorja' : 'lovorjev',
    'lovorjevi' : 'lovorjev',
    'lovorov' : 'lovorjev',
    'lovorova' : 'lovorjev',
    #M
    'makaronov' : 'testenine',
    'mandljev' : 'mandlji',
    'marelic' : 'marelice',
    'margarine' : 'margarina',
    'masla' : 'maslo',
    'mesa' : 'meso',
    'mleka' : 'mleko',
    'moke' : 'moka',
    #N
    #O
    'oliv' : 'olive',
    'olja' : 'olje',
    'orehov' : 'orehi',
    'origana' : 'origano',
    #P
    'paprike' : 'paprika',
    'papriki' : 'paprika',
    'paradižnika' : 'paradižnik',
    'paradižnikov' : 'paradižnik',
    'paradižnikove' : 'paradižnik',
    'paradižnikovega' : 'paradižnik',
    'permezana' : 'sir',
    'peteršilja' : 'peteršilj',
    'pistacij' : 'pistacija',
    'piva' : 'pivo',
    'popra' : 'poper',
    'pora' : 'por',
    'porovo' : 'por',
    'puranji' : 'perutnina',
    #R
    'rakcev' : 'rakci',
    'riža' : 'riž',
    'rožmarina' : 'rožmarin',
    'ruma' : 'rum',
    'rumenjak' : 'jajca',
    'rumenjaka' : 'jajca',
    'rumenjake' : 'jajca',
    'rumenjaki' : 'jajca',
    'rumenjakov' : 'jajca',
    #S
    'sira' : 'sir',
    'sladkorja' : 'sladkor',
    'smetane' : 'smetana',
    'soli' : 'sol',
    'svinine' : 'svinjina',
    'svinjine' : 'svinjina',
    #Š
    'šalotke' : 'šalotka',
    'šampinjini' : 'gobe',
    'šampinjonov' : 'gobe',
    'šetraja' : 'šetraj',
    'špageti' : 'testenine',
    'špagetov' : 'testenine',
    #T
    'testa' : 'testo',
    'testenin' : 'testenine',
    'timijana' : 'timijan',
    'tuna' : 'ribe',
    'tune' : 'ribe',
    #U
    #V
    'vanilije' : 'vanilija',
    'vina' : 'vino',
    'vode' : 'voda',
    #Z
    'zdroba' : 'zdrob',
    'zelene' : 'zelena',
    'zelja' : 'zelje',
    'zrezki' : 'meso',
    #Ž
    'želatine' : 'želatina'
    }

brisi = [
    #A
    'a',
    'ali',
    #B
    'bel',
    'bela',
    'bele',
    'beli',
    'belega',
    'brez',
    'burbonske',
    #C
    'cel',
    'cela',
    'cele',
    'celo',
    'cl',
    'cvrenje',
    'cvrtje',
    #Č
    'četrtine',
    'črnega',
    #D
    'dag',
    'dl',
    'do',
    'dobro',
    'dobrega',
    'drobno',
    #E
    'ena',
    'ene',
    'eno',
    'Eno',
    #F
    'file',
    'fileja',
    #G
    'glava',
    #H
    'hokaido',
    #I    
    'in',
    'iz',
    #J
    'je',
    'jedilna',
    'jedilne',
    'jedilnega',
    'jušna',
    'jušne',
    'jušno',
    #K
    'kg',
    'kg.',
    'kisla',
    'kisle',
    'kislih',
    'kock',
    'kocka',
    'kocke',
    'kocko',
    'količina',
    'kolobarčke',
    'kolobarje',
    'konzerva',
    'konzerve',
    'konzervi',
    'korenino',
    'kos',
    'kose',
    'kost',
    'kosti',
    'košček',
    'koščke',
    'kruhove',
    'kruhovih',
    'kuhana',
    'kuhane',
    'kuhanega',
    'kuhanih',
    'kuhano',
    #L
    'listnatega',
    'litrov',
    'lonček',
    'lupina',
    'lupinica',
    #M
    'majhen',
    'majhna',
    'majhne',
    'majhni',
    'malo',
    'manjša',
    'mehke',
    'mehkih',
    'mehiškega',
    'mezga',
    'mezge',
    'mlade',
    'mladega',
    'mladi',
    'mladih',
    'mlet',
    'mleta',
    'mlete',
    'mletega',
    'močna',
    'močne',
    'mokasta',
    #N
    'na',
    'namočenih',
    'nastrgana',
    'nastrgane',
    'narezanega',
    'nastrganih',
    'narezan',
    'narezana',
    'narezane',
    'narezani',
    'narezanih',
    'narezano',
    'nariban',
    'naribana',
    'naribane',
    'naribanega',
    'nekaj',
    'nemastnega',
    #O
    'okusu',
    'olivno',
    'olivnega',
    'olupljen',
    'olupljena',
    'olupljene',
    'olupljenih',
    'oprana',
    'osnove',
    'ostra',
    'ostre',
    'oz',
    #P
    'pecilni',
    'pecilnega',
    'pekoče',
    'pločevinka',
    'pločevinke',
    'po',
    'polnozrnata',
    'polnozrnate',
    'popečen',
    'popečenega',
    'posip',
    'posipanje',
    'posušena',
    'posušene',
    'posušenega',
    'potrebi',
    'prah',
    'prahu',
    'praška',
    'prašku',
    #R
    'razkoščičenih',
    'rdeč',
    'rdeča',
    'rdeče',
    'rdečega',
    'rezin',
    'rezina',
    'rezine',
    'riževega',
    'rjavega',
    #S
    's',
    'se',
    'sesekljan',
    'sesekljana',
    'sesekljane',
    'sesekljanega',
    'sesekljanih',
    'sladka',
    'sladke',
    'skodelica',
    'skodela',
    'skodele',
    'skodeli',
    'sok',
    'soka',
    'span',
    'srednje',
    'stepene',
    'stebla',
    'steblo',
    'stopljenega',
    'stročjega',
    'strok',
    'stroka',
    'stroke',
    'stroki',
    'strtega',
    'svetlega',
    'sveža',
    'sveže',
    'sveži',
    'svežega',
    'suh',
    'suha',
    'suhega',
    'surovega',
    #Š
    'šcepec',
    'ščepec',
    #T
    'tenkega',
    'temne',
    'temnega',
    'trd',
    'trdo',
    'tudi',
    #U
    #V
    'v',
    'velik',
    'velika',
    'veliki'
    'velikih',
    'velike',
    'večja',
    'večje',
    'večji',
    'večjih',
    'vinskega',
    'vinski',
    'vlečenega',
    'voda',
    'vode',
    'vroča',
    'vroče',
    #Z
    'z',
    'za',
    'začinko',
    'zamrznjenega',
    'zavitek',
    'zmlet',
    'zmleta',
    'zmlete',
    'zmletih',
    'zrn',
    'zrnih',
    #Ž
    'želji',
    'žlic',
    'žlica',
    'žlice'
    ]

def odstrani(beseda):
    if len(beseda) > 0:        
        if beseda[0] in '"<()-0123456789ˇ;./':
            beseda = odstrani(beseda[1:])
        if len(beseda) > 1:
            if beseda[-1] in '"\n.;,>/)':
                beseda = odstrani(beseda[:-1])
            if 'https://www' in beseda:
                i = beseda.index('>')
                beseda = beseda[i + 1:-3]
    return beseda

    
def pocisti(sestavina):
    besede = sestavina.split(' ')
    kljucna = []
    for i in range(len(besede)):
        
        # Najprej pobrisemo razne znake : ",(),.,/,...
        b = odstrani(besede[i])
        
        # Če je b v slovarju, jo
        # "prevedemo" : limoninih -> limona
        if b in slovar:
            kljucna.append(slovar[b])
            
        # Če je b nepotrebna beseda (steblo, malo,
        # in, narezana ...), jo izbrišemo
        elif b not in brisi and b != '\n':      # and len(b) <= 1
            kljucna.append(b)
    
    #print('KONEC ', kljucna)
    while [] in kljucna:
        kljucna.remove([])
    k = []
    if len(kljucna) == 1:                         # and kljucna[0] not in slovar -
            #if kljucna[0] not in slovar.values():            #da vidimo, kaj je treba še popravit
            #    k = kljucna[0]
            if kljucna[0] in [
                'govedina',
                'svinjina',
                'jagnjetina'
                ]:
                k = kljucna[0] + '\n' + 'meso'
            else:
                k = kljucna[0] 

    elif len(kljucna) == 2:
        if 'sol' in kljucna and 'poper' in kljucna:
            k = 'sol' + '\n' + 'poper'              # nekako ločimo, da dobimo dve sestavini
##                                                    # (obema dodamo ID recepta?)
        elif 'list' in kljucna and 'lovorjev' in kljucna:
            k = 'lovorjev list'                     # DVE BESEDI!
##        if 'smetana' in kljucna:
##            if 'kisla' in kljucna:
##                k = 'kisla smetana'                 # DVE BESEDI!
##            elif 'sladka' in kljucna:
##                k = 'sladka smetana'                # DVE BESEDI!
        else:
            k = sestavina + 'OSTANE : ' + str(kljucna) 
    else:
        k = sestavina + 'OSTANE : ' + str(kljucna)  
    return k

#print(pocisti('močne jušne osnove ali vode z jušno kocko'))

with open('kljucne_nove.txt','w', encoding='utf-8') as g:
    with open('CSV/sestavina_popravljam_rocno.csv','r', encoding='utf-8') as f:
        for vrstica in f.readlines():
            if vrstica != '\n':
                ime, sestavina = vrstica.split(',,')
                g.write(str(pocisti(sestavina)) + ' <- - - - - - ' + sestavina + '\n')


# TESTA?




